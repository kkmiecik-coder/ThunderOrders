/**
 * Client Layout
 * Sidebar + Main Wrapper layout with dark glassmorphism support
 */

/* Body layout with sidebar */
body {
    min-height: 100vh;
}

/* Main wrapper adjusted for sidebar */
.main-wrapper {
    flex: 1;
    margin-left: var(--sidebar-width);
    transition: margin-left var(--transition-sidebar);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* When sidebar is collapsed */
.sidebar[data-collapsed="true"] ~ .main-wrapper {
    margin-left: var(--sidebar-width-collapsed);
}

/* Main content below topbar */
.main-content {
    flex: 1;
    padding-top: var(--topbar-height);
    background: var(--bg-primary);
    min-height: 100vh;
    transition: background 0.5s ease;
}

/* ==================== */
/* Dark Mode - Glassmorphism Background */
/* ==================== */
[data-theme="dark"] .main-content {
    background-attachment: fixed;
}

/* Dark mode topbar glass effect */
.topbar {
    transition: background 0.5s ease,
                backdrop-filter 0.5s ease,
                border-color 0.5s ease;
}

[data-theme="dark"] .topbar {
    background: rgba(15, 12, 41, 0.85);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(240, 147, 251, 0.1);
}

/* Dark mode mobile navbar */
[data-theme="dark"] .mobile-navbar {
    background: rgba(15, 12, 41, 0.95);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(240, 147, 251, 0.1);
}

/* Dark mode search button */
[data-theme="dark"] .topbar-search-btn {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(240, 147, 251, 0.15);
}

[data-theme="dark"] .topbar-search-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(240, 147, 251, 0.25);
}

[data-theme="dark"] .topbar-search-text kbd {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(240, 147, 251, 0.2);
}

/* Dark mode topbar buttons */
[data-theme="dark"] .topbar-btn:hover {
    background: rgba(255, 255, 255, 0.08);
}

[data-theme="dark"] .topbar-btn img {
    filter: brightness(0) invert(1);
    opacity: 0.7;
}

[data-theme="dark"] .topbar-btn:hover img {
    opacity: 1;
}

/* Dark mode user dropdown */
[data-theme="dark"] .topbar-user-btn:hover {
    background: rgba(255, 255, 255, 0.08);
}

[data-theme="dark"] .topbar-dropdown-menu {
    background: rgba(15, 12, 41, 0.98);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-color: rgba(240, 147, 251, 0.2);
}

[data-theme="dark"] .topbar-dropdown-item:hover {
    background: rgba(255, 255, 255, 0.08);
}

[data-theme="dark"] .topbar-dropdown-item img {
    filter: brightness(0) invert(1);
}

/* Responsive */
@media (max-width: 768px) {
    body {
        display: block;
    }

    .main-wrapper {
        margin-left: 0;
    }

    /* Fix: Collapsed sidebar on mobile should have no margin */
    .sidebar[data-collapsed="true"] ~ .main-wrapper {
        margin-left: 0;
    }

    .main-content {
        margin-top: 60px; /* Mobile navbar height */
        padding: var(--space-4);
    }
}
