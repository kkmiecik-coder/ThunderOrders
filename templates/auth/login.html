{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/auth/login.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/auth/verify-code.css') }}">
{% endblock %}

{% block title %}Logowanie - ThunderOrders{% endblock %}

{% block body_content %}
<div class="auth-container">
    <div class="auth-card">
        <!-- Left side - Form -->
        <div class="auth-form-section">
            <div class="auth-header">
                <img src="{{ url_for('static', filename='img/icons/logo-full-black.svg') }}" alt="ThunderOrders" class="auth-logo">
                <h1 class="auth-title">Witaj ponownie</h1>
                <p class="auth-subtitle">Zaloguj się na swoje konto.</p>
            </div>

            <form method="POST" action="{{ url_for('auth.login') }}" class="auth-form">
                {{ form.hidden_tag() }}

                <!-- Email Input -->
                <div class="auth-input-group">
                    {{ form.email(
                        class="auth-input",
                        placeholder=" ",
                        autofocus=true
                    ) }}
                    <label for="email" class="auth-input-label">E-mail</label>
                    {% if form.email.errors %}
                        <div class="form-error">
                            {% for error in form.email.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <!-- Password Input with Toggle -->
                <div class="auth-input-group">
                    <div class="password-toggle-wrapper">
                        {{ form.password(
                            class="auth-input",
                            placeholder=" "
                        ) }}
                        <button type="button" class="password-toggle-btn" tabindex="-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </button>
                    </div>
                    <label for="password" class="auth-input-label">Hasło</label>
                    {% if form.password.errors %}
                        <div class="form-error">
                            {% for error in form.password.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <!-- Remember & Forgot -->
                <div class="auth-options">
                    <label class="auth-remember">
                        {{ form.remember_me() }}
                        <span>Zapamiętaj mnie</span>
                    </label>
                    <a href="{{ url_for('auth.forgot_password') }}" class="auth-forgot">
                        Zresetuj hasło
                    </a>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="auth-submit">
                    Zaloguj się
                </button>

                <!-- Register Link -->
                <div class="auth-register-link">
                    Nie masz jeszcze konta?
                    <a href="{{ url_for('auth.register') }}">Zarejestruj się</a>
                </div>
            </form>
        </div>

        <!-- Right side - Image/Gradient -->
        <div class="auth-image-section">
            <div class="auth-image-content">
                <img src="{{ url_for('static', filename='img/auth-bg.jpg') }}" alt="Welcome" class="auth-image">
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/components/password-toggle.js') }}"></script>
<script>
// Floating label logic - check if input has value on page load
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.auth-input').forEach(input => {
        // Check on page load if input has value
        if (input.value) {
            input.classList.add('has-value');
        }

        // Check on input
        input.addEventListener('input', function() {
            if (this.value) {
                this.classList.add('has-value');
            } else {
                this.classList.remove('has-value');
            }
        });
    });
});
</script>
{% endblock %}
