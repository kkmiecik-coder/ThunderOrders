<!-- Modal udostępniania kolekcji -->
<div id="publicConfigModal" class="modal-overlay" onclick="if(event.target===this) closePublicConfigModal()">
    <div class="modal-content modal-sm">

        <!-- ===== Stan tworzenia (brak konfiguracji) ===== -->
        <div id="publicConfigCreate" style="display: none;">
            <div class="modal-body">
                <div class="share-create-hero">
                    <div class="share-create-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"/>
                            <polyline points="16 6 12 2 8 6"/>
                            <line x1="12" y1="2" x2="12" y2="15"/>
                        </svg>
                    </div>
                    <h2 class="share-create-title">Udostępnij kolekcję</h2>
                    <p class="share-create-desc">Stwórz publiczną stronę swojej kolekcji. Każdy kto otrzyma link, będzie mógł przeglądać Twoje przedmioty.</p>
                    <button type="button" class="btn btn-primary share-create-btn" onclick="createPublicConfig()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"/>
                            <polyline points="16 6 12 2 8 6"/>
                            <line x1="12" y1="2" x2="12" y2="15"/>
                        </svg>
                        Utwórz publiczną stronę
                    </button>
                </div>
            </div>
        </div>

        <!-- ===== Stan konfiguracji (strona już istnieje) ===== -->
        <div id="publicConfigExists" style="display: none;">
            <div class="modal-header">
                <h2>Udostępnianie</h2>
                <button type="button" class="modal-close" onclick="closePublicConfigModal()">&times;</button>
            </div>
            <div class="modal-body">

                <!-- Sekcja URL -->
                <div class="share-url-card" id="publicUrlSection">
                    <label class="share-url-label">Link do kolekcji</label>
                    <div class="share-url-row">
                        <input type="text" class="share-url-input" id="publicUrlInput" readonly>
                        <button type="button" class="share-url-copy" id="btnCopyUrl" onclick="copyPublicUrl()" title="Kopiuj link">
                            <svg class="copy-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                            </svg>
                            <svg class="check-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="display:none">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                        </button>
                    </div>
                    <button type="button" class="share-open-link" onclick="window.open(document.getElementById('publicUrlInput').value, '_blank')">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/>
                            <polyline points="15 3 21 3 21 9"/>
                            <line x1="10" y1="14" x2="21" y2="3"/>
                        </svg>
                        Otwórz stronę
                    </button>
                </div>

                <!-- Ustawienia -->
                <div class="settings-section" id="publicConfigSettings">
                    <h3 class="settings-section-title">Ustawienia</h3>

                    <div class="settings-row">
                        <div class="settings-row-info">
                            <span class="settings-row-label">Strona aktywna</span>
                            <span class="settings-row-hint" id="configActiveHint">Wyłączona strona zwraca błąd 404</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="configIsActive" onchange="updatePublicConfig()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="settings-row">
                        <div class="settings-row-info">
                            <span class="settings-row-label">Pokaż ceny</span>
                            <span class="settings-row-hint">Ceny rynkowe widoczne na publicznej stronie</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="configShowPrices" onchange="updatePublicConfig()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Widoczność przedmiotów -->
                <div class="settings-section">
                    <div class="share-items-header">
                        <h3 class="settings-section-title">Widoczność przedmiotów</h3>
                        <label class="share-select-all">
                            <input type="checkbox" id="configSelectAll" onchange="toggleAllPublicItems(this.checked)">
                            <span>Wszystkie</span>
                        </label>
                    </div>
                    <div class="share-items-list" id="configItemsList">
                        <!-- Wypełnione przez JS -->
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>
